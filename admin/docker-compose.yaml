version: '3.9' 
services:  
  backend:   
    build: 
      context: . 
      dockerfile: Dockerfile

    ports: 
      - 8000:8000 #dockerfile port, local host
    volumes: 
      - .:/app
    depends_on: # Depends on means that db will run before this does 
      - db

  db: 
    image: mysql:5.7.22
    restart: always 
    environment: 
      MYSQL_DATABASE: admin 
      MYSQL_USER: root
      MYSQL_PASSWORD: root 
      MYSQL_ROOT_PASSWORD: root 
    volumes: 
      - .dbdata:/var/lib/mysql  
    ports: 
      - 33066:3306
